{% extends "base.html" %}
{% block content %}
<h3>Transactions</h3>
<table class="table table-striped">
  <thead><tr><th>When</th><th>Type</th><th>Item</th><th>Qty</th><th>Unit</th><th>Depot</th><th>Donor</th><th>Beneficiary</th><th>Distributor</th><th>Notes</th></tr></thead>
  <tbody>
  {% for t in rows %}
    <tr>
      <td>{{ t.created_at.strftime("%Y-%m-%d %H:%M") }}</td>
      <td>
        <span class="badge bg-{% if t.ttype == 'IN' %}success{% else %}danger{% endif %}">{{ t.ttype }}</span>
      </td>
      <td>{{ t.item.name }}</td>
      <td>{{ t.qty }}</td>
      <td>{{ t.item.unit }}</td>
      <td>{{ t.depot.name if t.depot else "—" }}</td>
      <td>{{ t.donor.name if t.donor else "—" }}</td>
      <td>{{ t.beneficiary.name if t.beneficiary else "—" }}</td>
      <td>{{ t.distributor.name if t.distributor else "—" }}</td>
      <td>{{ t.notes or "" }}</td>
    </tr>
  {% else %}
    <tr><td colspan="10" class="text-center py-3">No transactions yet.</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
